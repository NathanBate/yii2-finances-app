(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["35351c74"],{"1dd7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=this,a=t.$createElement,s=t._self._c||a;return s("q-page",{staticClass:"q-pb-xl"},[s("BreadCrumbs",{attrs:{crumbs:t.crumbs}}),s("div",{staticClass:"row justify-center q-mt-none q-pt-none"},[s("div",{staticClass:"col-xs-10 col-sm-8 col-md-6 col-lg-6 col-xl-5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-shrink"},[s("h5",{staticClass:"q-mb-none q-pb-none q-mt-sm"},[t._v("\n            "+t._s(t.budgetName)+"\n            "),t.budgetAvailableForUpdate?s("span",[s("q-btn",{attrs:{color:"primary",round:"",size:"xs",icon:"edit",to:"/budgets/updatetitle/"+t.$route.params.id+"/"}})],1):t._e()])]),s("div",{staticClass:"col-grow text-right q-mt-xs"},[s("q-btn",{staticClass:"q-my-auto",attrs:{label:"Archive"},on:{click:t.archiveStatement}})],1)]),s("q-separator",{staticClass:"q-mt-md"}),s("div",{staticClass:"row q-mt-md q-mb-xl"},[s("div",{staticClass:"col-12 text-left text-bold"},[t._v("Total Income: $"+t._s(t.totalIncome))]),s("div",{staticClass:"col-12 text-left text-bold"},[t._v("Total Expenses: $"+t._s(t.totalExpenses))]),s("div",{staticClass:"text-bold",class:t.totalIncome-t.totalExpenses<0?"text-red":"text-green"},[t._v("Net Income: $"+t._s(Number(t.totalIncome-t.totalExpenses)))])]),s("BudgetItemTable",{attrs:{items:t.budgetIncomeItems,"item-type":"I",total:t.totalIncome,updatable:!0}}),s("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.showAddIncomeBudgetItem,expression:"((! showAddIncomeBudgetItem))"}],staticClass:"q-mt-lg q-mb-lg",attrs:{icon:"add",round:""},on:{click:function(e){t.showAddIncomeBudgetItem=!0}}}),t.showAddIncomeBudgetItem?s("AddBudgetItem",{staticClass:"q-mb-xl q-mt-md",attrs:{itemType:"I",categories:t.incomeCategories,budget:Number(t.$route.params.id),currentlyUsedCategories:t.usedBudgetIncomeCategories},on:{newBudgetItem:function(t){e.showAddIncomeBudgetItem=!1,e.budgetIncomeItems.push(t);var a={};a[Number(t.categoryId)]=t,e.$set(e.usedBudgetIncomeCategories,Number(t.categoryId),a)},showAddBudgetItem:function(t){e.showAddIncomeBudgetItem=t}}}):t._e(),s("BudgetItemTable",{staticClass:"q-mt-xl",attrs:{items:t.budgetExpenseItems,"item-type":"E",total:t.totalExpenses,updatable:!0}}),s("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.showAddExpenseBudgetItem,expression:"((! showAddExpenseBudgetItem))"}],staticClass:"q-mt-lg",attrs:{icon:"add",round:""},on:{click:function(e){t.showAddExpenseBudgetItem=!0}}}),t.showAddExpenseBudgetItem?s("AddBudgetItem",{staticClass:"q-mb-xl q-mt-md",attrs:{itemType:"E",categories:t.expenseCategories,budget:Number(t.$route.params.id),currentlyUsedCategories:t.usedBudgetExpensesCategories},on:{newBudgetItem:function(t){e.showAddExpenseBudgetItem=!1,e.budgetExpenseItems.push(t);var a={};a[Number(t.categoryId)]=t,e.$set(e.usedBudgetExpensesCategories,Number(t.categoryId),a)},showAddBudgetItem:function(t){e.showAddExpenseBudgetItem=t}}}):t._e()],1)])],1)},o=[],n=(a("7f7f"),a("c5f6"),a("d8b7")),r=a("c427"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-card",{staticClass:"bg-grey-2 my-card",attrs:{bordered:""}},[a("q-card-section",["I"==e.itemType?a("div",{staticClass:"text-h6 q-pl-sm q-pb-none"},[e._v("Add Income Budget Item")]):a("div",{staticClass:"text-h6 q-pl-sm q-pb-none"},[e._v("Add Expense Budget Item")])]),a("q-card-section",[a("q-form",{on:{submit:e.addBudgetItem}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 q-px-sm"},[a("q-select",{attrs:{filled:"",color:"white",dense:"","bg-color":"white",label:"I"==e.itemType?"Income Category":"Expense Category",options:e.unusedCategories,clearable:"","no-error-icon":"",rules:[function(e){return!!e||"Required!"}]},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),a("div",{staticClass:"col-6 q-px-sm"},[a("q-input",{attrs:{"label-color":"white","bg-color":"white",label:"Amount",dense:"",filled:"","no-error-icon":"",rules:[function(e){return!!e||"Required!"}]},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1)]),a("div",{staticClass:"row q-mt-sm"},[a("div",{staticClass:"col-shrink q-px-sm"},[a("q-btn",{staticClass:"q-mr-md",attrs:{type:"submit"}},[e._v("\n              Add\n            ")]),a("q-btn",{staticClass:"q-mr-md",on:{click:function(t){e.$emit("showAddBudgetItem",!1),e.category="",e.amount=""}}},[e._v("\n              Cancel\n            ")]),a("q-btn",{staticClass:"q-mr-md",on:{click:function(t){e.showAddCategoryBox=!0}}},[e._v("\n              Add Category\n            ")])],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("AddEditCategory",{directives:[{name:"show",rawName:"v-show",value:e.showAddCategoryBox,expression:"showAddCategoryBox"}],attrs:{Add:!0,categoryType:e.itemType}})],1)])],1)],1)],1)},c=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-form",{staticClass:"q-gutter-md q-mt-lg",on:{submit:e.addBudgetCategory}},["I"==e.categoryType?a("h6",{staticClass:"q-mb-sm"},[e._v("Add Income Category")]):e._e(),"E"==e.categoryType?a("h6",{staticClass:"q-mb-sm"},[e._v("Add Expense Category")]):e._e(),a("q-input",{ref:"input",staticClass:"q-mb-none",attrs:{outlined:"",label:"Category Name","no-error-icon":"",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.budgetCategoryName,callback:function(t){e.budgetCategoryName=t},expression:"budgetCategoryName"}}),a("q-btn",{staticClass:"q-mt-none",attrs:{type:"submit",color:"primary",label:"Add"}})],1)],1)},u=[],l={name:"AddEditCategory",props:{categoryType:{validator:function(e){return"I"==e||"E"==e}},Add:{type:[Boolean],required:!0}},data:function(){return{budgetCategoryName:""}},methods:{addBudgetCategory:function(){var e=this,t={name:this.budgetCategoryName,type:this.categoryType};console.log(t),r["a"].post("budget/add-budget-category",t).then((function(t){!0===t.data.success&&e.$router.push("/budgets/")})).catch((function(t){console.log(t),e.$q.notify({message:"There was a problem adding the category",color:"red",position:"top",timeout:5e3})})).then((function(){}))}}},m=l,g=a("2877"),b=a("eebe"),p=a.n(b),h=a("0378"),f=a("27f9"),y=a("9c40"),C=Object(g["a"])(m,i,u,!1,null,null,null),v=C.exports;p()(C,"components",{QForm:h["a"],QInput:f["a"],QBtn:y["a"]});var I={name:"AddBudgetItem",components:{AddEditCategory:v},props:{itemType:{validator:function(e){return"I"==e||"E"==e}},categories:{type:[Array],default:[]},budget:{type:[Number],required:!0},currentlyUsedCategories:{type:[Object],required:!0}},data:function(){return{category:"",amount:"",showAddCategoryBox:!1}},computed:{unusedCategories:function(){var e=this,t=[],a=0;return this.categories.forEach((function(s){e.currentlyUsedCategories.hasOwnProperty(s.value)||(console.log("category"),console.log(s),t[a]=s,a++)})),console.log("filtered categories"),console.log(t),t}},methods:{addBudgetItem:function(){var e=this,t={categoryId:this.category.value,categoryName:this.category.label,amount:this.amount,budget:this.budget,budgetItemId:this.budget};r["a"].post("budget/add-budget-item",t).then((function(t){!0===t.data.success&&(e.$emit("newBudgetItem",t.data.budgetItem),e.category="",e.amount="")})).catch((function(t){console.log(t),e.$q.notify({message:"There was a problem adding the category",color:"red",position:"top",timeout:5e3})})).then((function(){}))}}},q=I,x=a("f09f"),B=a("a370"),w=a("ddd8"),E=Object(g["a"])(q,d,c,!1,null,null,null),A=E.exports;p()(E,"components",{QCard:x["a"],QCardSection:B["a"],QForm:h["a"],QSelect:w["a"],QInput:f["a"],QBtn:y["a"]});var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-markup-table",{staticClass:"q-mt-sm"},[a("thead",{staticClass:"bg-grey-2"},[a("tr",[a("th",{staticClass:"text-left",attrs:{colspan:"2"}},["I"==e.itemType?a("div",{staticClass:"text-h5"},[e._v("Income")]):e._e(),"E"==e.itemType?a("div",{staticClass:"text-h5"},[e._v("Expenses")]):e._e()])]),a("tr",[a("th",{staticClass:"text-left"},[e._v("Category")]),a("th",{staticClass:"text-left"},[e._v("Amount")])])]),a("tbody",[e._l(e.items,(function(t){return a("tr",{key:"budget-items-list-item-id-"+t.id},[a("td",[e._v(e._s(t.categoryName))]),a("td",[e.updatable?a("router-link",{staticStyle:{"text-decoration":"none",color:"black"},attrs:{to:"/budgets/"+e.$route.params.id+"/update-budget-item/"+t.budgetItemId+"/"}},[e._v("\n        $"+e._s(t.amount)+"\n      ")]):a("div",[e._v("\n        $"+e._s(t.amount)+"\n      ")])],1)])})),a("tr",{staticClass:"bg-grey-2"},[a("td"),a("td",{staticClass:"text-left text-bold"},[e._v("$"+e._s(e.total))])])],2)])},$=[],N={name:"BudgetItemTable",props:{items:{type:[Array],required:!0},itemType:{validator:function(e){return"I"==e||"E"==e}},total:{type:[Number],required:!0},updatable:{type:[Boolean],required:!1,default:!1}}},O=N,T=a("2bb1"),k=Object(g["a"])(O,_,$,!1,null,null,null),j=k.exports;p()(k,"components",{QMarkupTable:T["a"]});var Q={name:"UpdateBudget",components:{BreadCrumbs:n["a"],AddBudgetItem:A,BudgetItemTable:j},data:function(){return{budgetName:"",budgetCategoryName:"",budgetCategoriesLabels:[{label:"",value:""},{label:"Income",value:"I"},{label:"Expense",value:"E"}],incomeCategories:[],expenseCategories:[],budgetCategoryType:"",budgetIncomeItems:[],budgetExpenseItems:[],usedBudgetIncomeCategories:[],usedBudgetExpensesCategories:[],showAddIncomeBudgetItem:!1,showAddExpenseBudgetItem:!1,budgetAvailableForUpdate:!1}},computed:{crumbs:function(){return[{icon:"view_list",label:"Budgeting",to:"/budgets/"},{icon:"edit",label:"Update Budget",to:""}]},totalIncome:function(){var e=0;return this.budgetIncomeItems.forEach((function(t){e+=Number(t.amount)})),e},totalExpenses:function(){var e=0;return this.budgetExpenseItems.forEach((function(t){e+=Number(t.amount)})),e}},methods:{updateBudget:function(){var e=this,t={name:this.budgetName};console.log(t),r["a"].post("budget/add",t).then((function(t){!0===t.data.success&&e.$router.push("/budgets/")})).catch((function(t){console.log(t),e.$q.notify({message:"There was a problem adding the budget",color:"red",position:"top",timeout:5e3})})).then((function(){}))},getBudget:function(){var e=this;r["a"].get("budget/get-budget/"+this.$route.params.id).then((function(t){console.log("Budget from API"),console.log(t.data),!0===t.data.success&&(e.budgetName=t.data.budget.name,e.incomeCategories=t.data.incomeCategories,e.expenseCategories=t.data.expenseCategories,e.budgetIncomeItems=t.data.budgetIncomeItems,e.budgetExpenseItems=t.data.budgetExpenseItems,e.usedBudgetIncomeCategories=t.data.usedBudgetIncomeCategories,e.usedBudgetExpensesCategories=t.data.usedBudgetExpensesCategories,e.budgetAvailableForUpdate=t.data.budgetAvailableForUpdate)})).catch((function(t){console.log(t),e.$q.notify({message:"There was a problem adding the budget",color:"red",position:"top",timeout:5e3})})).then((function(){}))},archiveStatement:function(){var e=this;this.$q.dialog({title:"Confirm",message:"Are you sure you would like to archive this budget?",cancel:!0,persistent:!0}).onOk((function(){r["a"].get("budget/archive/"+e.$route.params.id).then((function(t){t.data.success&&e.$router.push("/budgets/")})).catch((function(t){console.log(t),e.$q.notify({message:"There was a problem archiving the budget.",color:"red",position:"top",timeout:5e3})})).then((function(){}))})).onOk((function(){})).onCancel((function(){})).onDismiss((function(){}))},addBudgetCategory:function(){}},created:function(){this.getBudget()}},P=Q,U=a("9989"),S=a("eb85"),F=Object(g["a"])(P,s,o,!1,null,null,null);t["default"]=F.exports;p()(F,"components",{QPage:U["a"],QBtn:y["a"],QSeparator:S["a"]})},d8b7:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row q-pb-lg q-pt-md",class:e.$q.platform.is.mobile?"q-pl-sm":"q-pl-lg"},[a("div",{staticClass:"col-md-12",style:e.$q.platform.is.mobile?"font-size:8px;":""},[a("q-breadcrumbs",[a("q-breadcrumbs-el",{attrs:{icon:"fas fa-home",to:"/"}}),e._l(e.crumbs,(function(e){return a("q-breadcrumbs-el",{key:"bread-crumb-key-"+e.label,attrs:{icon:e.icon,label:e.label,to:e.to}})}))],2)],1)])},o=[],n=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("c47a")),r=a.n(n),d=a("2f62");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"BreadCrumbs",props:{crumbs:{type:[Array],default:[]}},computed:i({},Object(d["b"])({accounts:"accounts/getAccounts"}))},l=u,m=a("2877"),g=a("eebe"),b=a.n(g),p=a("ead5"),h=a("079e"),f=Object(m["a"])(l,s,o,!1,null,null,null);t["a"]=f.exports;b()(f,"components",{QBreadcrumbs:p["a"],QBreadcrumbsEl:h["a"]})}}]);